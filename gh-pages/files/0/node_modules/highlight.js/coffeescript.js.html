<h1>coffeescript.js</h1>
<pre><code class="lang-js">module.exports = <span class="keyword">function</span>(hljs) {
  <span class="keyword">var</span> keywords = {
    keyword:
      <span class="comment">// JS keywords</span>
      <span class="string">'in if for while finally new do return else break catch instanceof throw try this '</span> +
      <span class="string">'switch continue typeof delete debugger class extends super'</span> +
      <span class="comment">// Coffee keywords</span>
      <span class="string">'then unless until loop of by when and or is isnt not'</span>,
    literal:
      <span class="comment">// JS literals</span>
      <span class="string">'true false null undefined '</span> +
      <span class="comment">// Coffee literals</span>
      <span class="string">'yes no on off '</span>,
    reserved: <span class="string">'case default function var void with const let enum export import native '</span> +
      <span class="string">'__hasProp __extends __slice __bind __indexOf'</span>
  };

  <span class="keyword">var</span> JS_IDENT_RE = <span class="string">'[A-Za-z$_][0-9A-Za-z$_]*'</span>;

  <span class="keyword">var</span> COFFEE_QUOTE_STRING_SUBST_MODE = {
    className: <span class="string">'subst'</span>,
    begin: <span class="string">'#\\{'</span>, end: <span class="string">'}'</span>,
    keywords: keywords,
    contains: [hljs.C_NUMBER_MODE, hljs.BINARY_NUMBER_MODE]
  };

  <span class="keyword">var</span> COFFEE_QUOTE_STRING_MODE = {
    className: <span class="string">'string'</span>,
    begin: <span class="string">'"'</span>, end: <span class="string">'"'</span>,
    relevance: <span class="number">0</span>,
    contains: [hljs.BACKSLASH_ESCAPE, COFFEE_QUOTE_STRING_SUBST_MODE]
  };

  <span class="keyword">var</span> COFFEE_HEREDOC_MODE = {
    className: <span class="string">'string'</span>,
    begin: <span class="string">'"""'</span>, end: <span class="string">'"""'</span>,
    contains: [hljs.BACKSLASH_ESCAPE, COFFEE_QUOTE_STRING_SUBST_MODE]
  };

  <span class="keyword">var</span> COFFEE_HERECOMMENT_MODE = {
    className: <span class="string">'comment'</span>,
    begin: <span class="string">'###'</span>, end: <span class="string">'###'</span>
  };

  <span class="keyword">var</span> COFFEE_HEREGEX_MODE = {
    className: <span class="string">'regexp'</span>,
    begin: <span class="string">'///'</span>, end: <span class="string">'///'</span>,
    contains: [hljs.HASH_COMMENT_MODE]
  };

  <span class="keyword">var</span> COFFEE_EMPTY_REGEX_MODE = {
    className: <span class="string">'regexp'</span>, begin: <span class="string">'//[gim]*'</span>
  };

  <span class="keyword">var</span> COFFEE_REGEX_MODE = {
    className: <span class="string">'regexp'</span>,
    begin: <span class="string">'/\\S(\\\\.|[^\\n])*/[gim]*'</span> <span class="comment">// \S is required to parse x / 2 / 3 as two divisions</span>
  };

  <span class="keyword">var</span> COFFEE_FUNCTION_DECLARATION_MODE = {
    className: <span class="string">'function'</span>,
    begin: JS_IDENT_RE + <span class="string">'\\s*=\\s*(\\(.+\\))?\\s*[-=]>'</span>,
    returnBegin: <span class="literal">true</span>,
    contains: [
      {
        className: <span class="string">'title'</span>,
        begin: JS_IDENT_RE
      },
      {
        className: <span class="string">'params'</span>,
        begin: <span class="string">'\\('</span>, end: <span class="string">'\\)'</span>
      }
    ]
  };

  <span class="keyword">var</span> COFFEE_EMBEDDED_JAVASCRIPT = {
    begin: <span class="string">'`'</span>, end: <span class="string">'`'</span>,
    excludeBegin: <span class="literal">true</span>, excludeEnd: <span class="literal">true</span>,
    subLanguage: <span class="string">'javascript'</span>
  };

  <span class="keyword">return</span> {
    keywords: keywords,
    contains: [
      <span class="comment">// Numbers</span>
      hljs.C_NUMBER_MODE,
      hljs.BINARY_NUMBER_MODE,
      <span class="comment">// Strings</span>
      hljs.APOS_STRING_MODE,
      COFFEE_HEREDOC_MODE, <span class="comment">// Should be before COFFEE_QUOTE_STRING_MODE for greater priority</span>
      COFFEE_QUOTE_STRING_MODE,
      <span class="comment">// Comments</span>
      COFFEE_HERECOMMENT_MODE, <span class="comment">// Should be before hljs.HASH_COMMENT_MODE for greater priority</span>
      hljs.HASH_COMMENT_MODE,
      <span class="comment">// CoffeeScript specific modes</span>
      COFFEE_HEREGEX_MODE,
      COFFEE_EMPTY_REGEX_MODE,
      COFFEE_REGEX_MODE,
      COFFEE_EMBEDDED_JAVASCRIPT,
      COFFEE_FUNCTION_DECLARATION_MODE
    ]
  };
};</code></pre>