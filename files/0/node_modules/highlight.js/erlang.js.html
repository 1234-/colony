<h1>erlang.js</h1>
<pre><code class="lang-js">module.exports = <span class="keyword">function</span>(hljs) {
  <span class="keyword">var</span> BASIC_ATOM_RE = <span class="string">'[a-z\'][a-zA-Z0-9_\']*'</span>;
  <span class="keyword">var</span> FUNCTION_NAME_RE = <span class="string">'('</span> + BASIC_ATOM_RE + <span class="string">':'</span> + BASIC_ATOM_RE + <span class="string">'|'</span> + BASIC_ATOM_RE + <span class="string">')'</span>;
  <span class="keyword">var</span> ERLANG_RESERVED = {
    keyword:
      <span class="string">'after and andalso|10 band begin bnot bor bsl bzr bxor case catch cond div end fun let '</span> +
      <span class="string">'not of orelse|10 query receive rem try when xor'</span>,
    literal:
      <span class="string">'false true'</span>
  };

  <span class="keyword">var</span> COMMENT = {
    className: <span class="string">'comment'</span>,
    begin: <span class="string">'%'</span>, end: <span class="string">'$'</span>,
    relevance: <span class="number">0</span>
  };
  <span class="keyword">var</span> NUMBER = {
    className: <span class="string">'number'</span>,
    begin: <span class="string">'\\b(\\d+#[a-fA-F0-9]+|\\d+(\\.\\d+)?([eE][-+]?\\d+)?)'</span>,
    relevance: <span class="number">0</span>
  };
  <span class="keyword">var</span> NAMED_FUN = {
    begin: <span class="string">'fun\\s+'</span> + BASIC_ATOM_RE + <span class="string">'/\\d+'</span>
  };
  <span class="keyword">var</span> FUNCTION_CALL = {
    begin: FUNCTION_NAME_RE + <span class="string">'\\('</span>, end: <span class="string">'\\)'</span>,
    returnBegin: <span class="literal">true</span>,
    relevance: <span class="number">0</span>,
    contains: [
      {
        className: <span class="string">'function_name'</span>, begin: FUNCTION_NAME_RE,
        relevance: <span class="number">0</span>
      },
      {
        begin: <span class="string">'\\('</span>, end: <span class="string">'\\)'</span>, endsWithParent: <span class="literal">true</span>,
        returnEnd: <span class="literal">true</span>,
        relevance: <span class="number">0</span>
        <span class="comment">// "contains" defined later</span>
      }
    ]
  };
  <span class="keyword">var</span> TUPLE = {
    className: <span class="string">'tuple'</span>,
    begin: <span class="string">'{'</span>, end: <span class="string">'}'</span>,
    relevance: <span class="number">0</span>
    <span class="comment">// "contains" defined later</span>
  };
  <span class="keyword">var</span> VAR1 = {
    className: <span class="string">'variable'</span>,
    begin: <span class="string">'\\b_([A-Z][A-Za-z0-9_]*)?'</span>,
    relevance: <span class="number">0</span>
  };
  <span class="keyword">var</span> VAR2 = {
    className: <span class="string">'variable'</span>,
    begin: <span class="string">'[A-Z][a-zA-Z0-9_]*'</span>,
    relevance: <span class="number">0</span>
  };
  <span class="keyword">var</span> RECORD_ACCESS = {
    begin: <span class="string">'#'</span>, end: <span class="string">'}'</span>,
    illegal: <span class="string">'.'</span>,
    relevance: <span class="number">0</span>,
    returnBegin: <span class="literal">true</span>,
    contains: [
      {
        className: <span class="string">'record_name'</span>,
        begin: <span class="string">'#'</span> + hljs.UNDERSCORE_IDENT_RE,
        relevance: <span class="number">0</span>
      },
      {
        begin: <span class="string">'{'</span>, endsWithParent: <span class="literal">true</span>,
        relevance: <span class="number">0</span>
        <span class="comment">// "contains" defined later</span>
      }
    ]
  };

  <span class="keyword">var</span> BLOCK_STATEMENTS = {
    keywords: ERLANG_RESERVED,
    begin: <span class="string">'(fun|receive|if|try|case)'</span>, end: <span class="string">'end'</span>
  };
  BLOCK_STATEMENTS.contains = [
    COMMENT,
    NAMED_FUN,
    hljs.inherit(hljs.APOS_STRING_MODE, {className: <span class="string">''</span>}),
    BLOCK_STATEMENTS,
    FUNCTION_CALL,
    hljs.QUOTE_STRING_MODE,
    NUMBER,
    TUPLE,
    VAR1, VAR2,
    RECORD_ACCESS
  ];

  <span class="keyword">var</span> BASIC_MODES = [
    COMMENT,
    NAMED_FUN,
    BLOCK_STATEMENTS,
    FUNCTION_CALL,
    hljs.QUOTE_STRING_MODE,
    NUMBER,
    TUPLE,
    VAR1, VAR2,
    RECORD_ACCESS
  ];
  FUNCTION_CALL.contains[<span class="number">1</span>].contains = BASIC_MODES;
  TUPLE.contains = BASIC_MODES;
  RECORD_ACCESS.contains[<span class="number">1</span>].contains = BASIC_MODES;

  <span class="keyword">var</span> PARAMS = {
    className: <span class="string">'params'</span>,
    begin: <span class="string">'\\('</span>, end: <span class="string">'\\)'</span>,
    contains: BASIC_MODES
  };
  <span class="keyword">return</span> {
    keywords: ERLANG_RESERVED,
    illegal: <span class="string">'(&lt;/|\\*=|\\+=|-=|/=|/\\*|\\*/|\\(\\*|\\*\\))'</span>,
    contains: [
      {
        className: <span class="string">'function'</span>,
        begin: <span class="string">'^'</span> + BASIC_ATOM_RE + <span class="string">'\\s*\\('</span>, end: <span class="string">'->'</span>,
        returnBegin: <span class="literal">true</span>,
        illegal: <span class="string">'\\(|#|//|/\\*|\\\\|:'</span>,
        contains: [
          PARAMS,
          {
            className: <span class="string">'title'</span>, begin: BASIC_ATOM_RE
          }
        ],
        starts: {
          end: <span class="string">';|\\.'</span>,
          keywords: ERLANG_RESERVED,
          contains: BASIC_MODES
        }
      },
      COMMENT,
      {
        className: <span class="string">'pp'</span>,
        begin: <span class="string">'^-'</span>, end: <span class="string">'\\.'</span>,
        relevance: <span class="number">0</span>,
        excludeEnd: <span class="literal">true</span>,
        returnBegin: <span class="literal">true</span>,
        lexems: <span class="string">'-'</span> + hljs.IDENT_RE,
        keywords:
          <span class="string">'-module -record -undef -export -ifdef -ifndef -author -copyright -doc -vsn '</span> +
          <span class="string">'-import -include -include_lib -compile -define -else -endif -file -behaviour '</span> +
          <span class="string">'-behavior'</span>,
        contains: [PARAMS]
      },
      NUMBER,
      hljs.QUOTE_STRING_MODE,
      RECORD_ACCESS,
      VAR1, VAR2,
      TUPLE
    ]
  };
};</code></pre>