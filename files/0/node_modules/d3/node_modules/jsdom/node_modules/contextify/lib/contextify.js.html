<h1>contextify</h1>
<pre><code class="lang-js"><span class="keyword">var</span> ContextifyContext = require(<span class="string">'bindings'</span>)(<span class="string">'contextify'</span>).ContextifyContext;

module.exports = <span class="function"><span class="keyword">function</span> <span class="title">Contextify</span> <span class="params">(sandbox)</span> {</span>
    <span class="keyword">if</span> (<span class="keyword">typeof</span> sandbox != <span class="string">'object'</span>) {
        sandbox = {};
    }
    <span class="keyword">var</span> ctx = <span class="keyword">new</span> ContextifyContext(sandbox);

    sandbox.run = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
        <span class="keyword">return</span> ctx.run.apply(ctx, arguments);
    };

    sandbox.getGlobal = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
        <span class="keyword">return</span> ctx.getGlobal();
    }

    sandbox.dispose = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
        sandbox.run = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
            <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">"Called run() after dispose()."</span>);
        };
        sandbox.getGlobal = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
            <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">"Called getGlobal() after dispose()."</span>);
        };
        sandbox.dispose = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
            <span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">"Called dispose() after dispose()."</span>);
        };
        ctx = <span class="literal">null</span>;
    }
    <span class="keyword">return</span> sandbox;
}
</code></pre>